<!-- TEMPLATE NAME: Dating Sim Tracker -->
<!-- AUTHOR: Prolix OCs -->

<!-- CARD_TEMPLATE_START -->
<style>
@media (max-width: 768px) {
  .tracker-card-container { 
    flex-direction: column;
    align-items: center;
  }
  
  .tracker-card { 
    flex: 1 1 100% !important; 
    max-width: 100% !important; 
    width: 100%;
    min-height: 400px !important;
    opacity: 1 !important;
  }
  
  .stat-icon { font-size: 20px !important; }
  .stat-value { font-size: 16px !important; }
  .stat-container { min-height: 70px !important; padding: 6px 3px !important; }
  .stat-title { font-size: 9px !important; }
  
  /* Mobile-specific adjustments */
  /* Updated selector for new header structure */
  .tracker-card > div:nth-child(3) {  /* Stats container is now the 3rd direct child after gradient and header */
    top: 100px !important; /* Moved up further for more even spacing */
    bottom: 110px !important; /* Keep same bottom clearance for thought label */
  }
}

@media (min-width: 769px) {
  .tracker-card-container { 
    flex-direction: row;
    flex-wrap: wrap;
  }
  
  .tracker-card { 
    flex: 1 1 calc(50% - 10px) !important; 
    max-width: calc(50% - 10px) !important; 
    height: 400px !important;
    opacity: 1 !important;
  }
  
  .stat-icon { font-size: 28px !important; margin-bottom: 6px !important; }
  .stat-value { font-size: 20px !important; }
  .stat-container { min-height: 90px !important; padding: 10px 6px !important; }
  .stat-title { font-size: 10px !important; }
  
  /* Desktop-specific adjustments */
  /* Updated selector for new header structure */
  .tracker-card > div:nth-child(3) {  /* Stats container is now the 3rd direct child after gradient and header */
    top: 110px !important; /* Moved up further for more even spacing */
    bottom: 110px !important; /* Keep same bottom clearance for thought label */
  }
}

@media (min-width: 1400px) {
  .tracker-card { 
    flex: 1 1 600px !important; 
    max-width: 600px !important; 
    height: 400px !important;
    opacity: 1 !important;
  }
  
  .stat-icon { font-size: 32px !important; margin-bottom: 8px !important; }
  .stat-value { font-size: 24px !important; }
  .stat-container { min-height: 100px !important; padding: 12px 8px !important; }
  .stat-title { font-size: 11px !important; }
  
  /* Large screen adjustments */
  /* Updated selector for new header structure */
  .tracker-card > div:nth-child(3) {  /* Stats container is now the 3rd direct child after gradient and header */
    top: 110px !important; /* Moved up further for more even spacing */
    bottom: 110px !important; /* Keep same bottom clearance for thought label */
  }
}

/* Minimalist design enhancements */
.tracker-card {
  transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1) !important;
  backdrop-filter: blur(12px) !important;
  border: 1px solid rgba(255, 255, 255, 0.08) !important;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2), 0 1px 4px rgba(0, 0, 0, 0.1), inset 0 1px 0 rgba(255, 255, 255, 0.05) !important;
}

.stat-container {
  transition: all 0.25s cubic-bezier(0.25, 0.8, 0.25, 1) !important;
  border: 1px solid rgba(255, 255, 255, 0.05) !important;
  background: rgba(255, 255, 255, 0.05) !important;
  backdrop-filter: blur(4px) !important;
}

.stat-container:hover {
  background: rgba(255, 255, 255, 0.12) !important;
  transform: translateY(-2px) !important;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.1) !important;
}

/* Minimalist badge styling */
.header-badge {
  background: rgba(0, 0, 0, 0.2) !important;
  border: 1px solid rgba(255, 255, 255, 0.08) !important;
  backdrop-filter: blur(8px) !important;
  font-weight: 500 !important;
  letter-spacing: 0.25px !important;
}

/* Character status styling */
.character-status {
  font-size: 12px !important;
  font-weight: 500 !important;
  color: rgba(255, 255, 255, 0.7) !important;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3) !important;
  letter-spacing: 0.25px !important;
  margin-top: 4px !important;
  text-align: left !important;
}

.status-divider {
  margin: 0 8px !important;
  opacity: 0.5 !important;
}

/* Divider between stats and thoughts */
.stats-thoughts-divider {
  position: absolute !important;
  bottom: 90px !important;
  left: 16px !important;
  right: 16px !important;
  height: 1px !important;
  background: rgba(255, 255, 255, 0.1) !important;
  box-shadow: 0 1px 0 rgba(0, 0, 0, 0.7) !important;
}

/* Thought label styling */
.thought-label {
  position: absolute !important;
  top: -24px !important;
  left: 0 !important;
  font-size: 11px !important;
  font-weight: 500 !important;
  color: rgba(255, 255, 255, 0.7) !important;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3) !important;
  letter-spacing: 0.25px !important;
}

/* Minimalist thought bubble */
.thought-bubble {
  background: rgba(0, 0, 0, 0.2) !important;
  border: 1px solid rgba(255, 255, 255, 0.08) !important;
  backdrop-filter: blur(8px) !important;
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.05) !important;
}

/* Subtle gradient overlay */
.gradient-overlay {
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent) !important;
}

/* Enhanced change indicators */
.change-indicator {
  position: absolute !important;
  top: -8px !important;
  right: -8px !important;
  color: white !important;
  font-size: 10px !important;
  font-weight: 600 !important;
  padding: 2px 6px !important;
  border-radius: 6px !important;
  border: 1px solid rgba(255, 255, 255, 0.2) !important;
  min-width: 24px !important;
  text-align: center !important;
  line-height: 1.2 !important;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2) !important;
  animation: pulse 0.5s ease-in-out !important;
}

.change-indicator.positive {
  background: rgba(46, 204, 113, 0.9) !important;
}

.change-indicator.negative {
  background: rgba(231, 76, 60, 0.9) !important;
}

.change-indicator.negative-alt {
  background: rgba(46, 204, 113, 0.9) !important;
}

@keyframes pulse {
  0% { transform: scale(0.8); opacity: 0.7; }
  50% { transform: scale(1.1); opacity: 1; }
  100% { transform: scale(1); opacity: 1; }
}
</style>

<div class="tracker-card-container" style="display:flex;gap:20px;justify-content:center;font-family:'Inter',-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;width:100%">
  <div class="tracker-card" style="min-width:320px;background:linear-gradient(145deg,{{bgColor}} 0%,{{darkerBgColor}} 50%,{{darkerBgColor}} 100%);border-radius:16px;padding:0;box-sizing:border-box;position:relative;color:#fff;font-size:14px;font-weight:500;{{#unless isActive}}opacity:0.6;{{/unless}}">
    <div class="gradient-overlay" style="position:absolute;top:0;left:0;right:0;height:1px;"></div>
    <!-- Combined Header Section -->
    <div class="tracker-card-header" style="padding:16px 20px 0 20px;font-size:12px;font-weight:500;display:flex;flex-direction:column;">
      <!-- Date and Counters Row -->
      <div style="display:flex;justify-content:space-between;align-items:center;width:100%;margin-bottom:8px;">
        <div class="header-badge" style="padding:4px 10px;border-radius:8px;font-weight:500;letter-spacing:0.25px">{{currentDate}}</div>
        <div style="display:flex;gap:8px">
          <div class="header-badge" style="padding:4px 10px;border-radius:8px;font-weight:500;letter-spacing:0.25px">Day {{stats.days_since_first_meeting}}</div>
          {{#if stats.preg}}<div class="header-badge" style="padding:4px 10px;border-radius:8px;font-weight:500;letter-spacing:0.25px">ü§∞{{stats.days_preg}}d</div>{{/if}}
        </div>
      </div>
      
      <!-- Character Name and Icons Row -->
      <div style="display:flex;justify-content:space-between;align-items:flex-start;width:100%;margin-bottom:4px;">
        <div style="font-size:26px;font-weight:600;letter-spacing:-0.25px;text-align:left;">{{characterName}}</div>
        <div style="display:flex;align-items:center;gap:12px;font-size:20px;flex-shrink:0;">
          {{#if healthIcon}}<span>{{healthIcon}}</span>{{/if}}
          {{#if stats.inactive}}
            {{#if (eq stats.inactiveReason 1)}}<span>üò¥</span>{{/if}}
            {{#if (eq stats.inactiveReason 2)}}<span>üè•</span>{{/if}}
            {{#if (eq stats.inactiveReason 3)}}<span>üò°</span>{{/if}}
            {{#if (eq stats.inactiveReason 4)}}<span>ü´†</span>{{/if}}
            {{#if (eq stats.inactiveReason 5)}}<span>ü™¶</span>{{/if}}
          {{/if}}
          <span>{{reactionEmoji}}</span>
        </div>
      </div>
      
      <!-- Character Status Row -->
      <div style="display:flex;justify-content:flex-start;width:100%;margin-bottom:12px;">
        <div class="character-status" style="display:flex;align-items:center;">
          {{#if stats.relationshipStatus}}<span>{{stats.relationshipStatus}}</span>{{/if}}
          {{#if stats.desireStatus}}<span class="status-divider">|</span><span>{{stats.desireStatus}}</span>{{/if}}
        </div>
      </div>
    </div>
    <div style="position:absolute;top:115px;bottom:110px;left:0;right:0;display:flex;justify-content:space-between;align-items:center;padding:0 12px;gap:8px;flex-wrap:nowrap">
      <div style="display:flex;flex-direction:column;align-items:center;flex:1;min-width:60px;max-width:120px;position:relative">
        <div class="stat-title" style="font-size:8px;font-weight:500;opacity:0.8;margin-bottom:3px;color:rgba(255,255,255,0.9);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;width:100%;text-align:center;line-height:1.2">AFFECTION</div>
        <div class="stat-container" style="padding:6px 3px;border-radius:10px;width:100%;display:flex;flex-direction:column;align-items:center;position:relative;min-height:70px;justify-content:center;box-sizing:border-box">
          <div class="stat-icon" style="font-size:20px;line-height:1;margin-bottom:3px">‚ù§Ô∏è</div>
          <div class="stat-value" style="font-size:16px;font-weight:600;line-height:1;">{{stats.ap}}</div>
          {{#if stats.apChange}}{{#unless (eq stats.apChange 0)}}
          <div class="change-indicator positive" style="position:absolute;top:-8px;right:-8px;color:white;font-size:10px;font-weight:600;padding:2px 6px;border-radius:6px;border:1px solid rgba(255,255,255,0.2);min-width:24px;text-align:center;line-height:1.2;box-shadow:0 2px 6px rgba(0,0,0,0.2);animation:pulse 0.5s ease-in-out">
            {{#if (gt stats.apChange 0)}}+{{/if}}{{stats.apChange}}
          </div>
          {{/unless}}{{/if}}
        </div>
      </div>
      <div style="display:flex;flex-direction:column;align-items:center;flex:1;min-width:60px;max-width:120px;position:relative">
        <div class="stat-title" style="font-size:8px;font-weight:500;opacity:0.8;margin-bottom:3px;color:rgba(255,255,255,0.9);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;width:100%;text-align:center;line-height:1.2">DESIRE</div>
        <div class="stat-container" style="padding:6px 3px;border-radius:10px;width:100%;display:flex;flex-direction:column;align-items:center;position:relative;min-height:70px;justify-content:center;box-sizing:border-box">
          <div class="stat-icon" style="font-size:20px;line-height:1;margin-bottom:3px">üî•</div>
          <div class="stat-value" style="font-size:16px;font-weight:600;line-height:1;">{{stats.dp}}</div>
          {{#if stats.dpChange}}{{#unless (eq stats.dpChange 0)}}
          <div class="change-indicator negative" style="position:absolute;top:-8px;right:-8px;color:white;font-size:10px;font-weight:600;padding:2px 6px;border-radius:6px;border:1px solid rgba(255,255,255,0.2);min-width:24px;text-align:center;line-height:1.2;box-shadow:0 2px 6px rgba(0,0,0,0.2);animation:pulse 0.5s ease-in-out">
            {{#if (gt stats.dpChange 0)}}+{{/if}}{{stats.dpChange}}
          </div>
          {{/unless}}{{/if}}
        </div>
      </div>
      <div style="display:flex;flex-direction:column;align-items:center;flex:1;min-width:60px;max-width:120px;position:relative">
        <div class="stat-title" style="font-size:8px;font-weight:500;opacity:0.8;margin-bottom:3px;color:rgba(255,255,255,0.9);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;width:100%;text-align:center;line-height:1.2">TRUST</div>
        <div class="stat-container" style="padding:6px 3px;border-radius:10px;width:100%;display:flex;flex-direction:column;align-items:center;position:relative;min-height:70px;justify-content:center;box-sizing:border-box">
          <div class="stat-icon" style="font-size:20px;line-height:1;margin-bottom:3px">ü§ù</div>
          <div class="stat-value" style="font-size:16px;font-weight:600;line-height:1;">{{stats.tp}}</div>
          {{#if stats.tpChange}}{{#unless (eq stats.tpChange 0)}}
          <div class="change-indicator positive" style="position:absolute;top:-8px;right:-8px;color:white;font-size:10px;font-weight:600;padding:2px 6px;border-radius:6px;border:1px solid rgba(255,255,255,0.2);min-width:24px;text-align:center;line-height:1.2;box-shadow:0 2px 6px rgba(0,0,0,0.2);animation:pulse 0.5s ease-in-out">
            {{#if (gt stats.tpChange 0)}}+{{/if}}{{stats.tpChange}}
          </div>
          {{/unless}}{{/if}}
        </div>
      </div>
      <div style="display:flex;flex-direction:column;align-items:center;flex:1;min-width:60px;max-width:120px;position:relative">
        <div class="stat-title" style="font-size:8px;font-weight:500;opacity:0.8;margin-bottom:3px;color:rgba(255,255,255,0.9);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;width:100%;text-align:center;line-height:1.2">CONTEMPT</div>
        <div class="stat-container" style="padding:6px 3px;border-radius:10px;width:100%;display:flex;flex-direction:column;align-items:center;position:relative;min-height:70px;justify-content:center;box-sizing:border-box">
          <div class="stat-icon" style="font-size:20px;line-height:1;margin-bottom:3px">üíî</div>
          <div class="stat-value" style="font-size:16px;font-weight:600;line-height:1;">{{stats.cp}}</div>
          {{#if stats.cpChange}}{{#unless (eq stats.cpChange 0)}}
          <div class="change-indicator negative-alt" style="position:absolute;top:-8px;right:-8px;color:white;font-size:10px;font-weight:600;padding:2px 6px;border-radius:6px;border:1px solid rgba(255,255,255,0.2);min-width:24px;text-align:center;line-height:1.2;box-shadow:0 2px 6px rgba(0,0,0,0.2);animation:pulse 0.5s ease-in-out">
            {{#if (gt stats.cpChange 0)}}+{{/if}}{{stats.cpChange}}
          </div>
          {{/unless}}{{/if}}
        </div>
      </div>
    </div>
    <div class="thought-label-divider" style="position:absolute;bottom:52px;left:50%;transform:translateX(-50%);width:80px;height:1px;background:linear-gradient(90deg,transparent,rgba(255,255,255,0.6),transparent);opacity:0.6;"></div>
    <div class="thought-bubble" style="position:absolute;left:16px;right:16px;bottom:16px;min-height:60px;border-radius:12px;display:flex;align-items:center;gap:12px;padding:12px 16px;">
      <div class="thought-label" style="position:absolute;top:-24px;left:0;font-size:11px;font-weight:500;color:rgba(255,255,255,0.7);text-shadow:0 1px 2px rgba(0,0,0,0.3);letter-spacing:0.25px">{{characterName}} thinks:</div>
      <div style="font-size:22px;flex-shrink:0">üí≠</div>
      <div style="flex:1;font-size:13px;font-weight:400;line-height:1.4;overflow:hidden;">{{stats.internal_thought}}</div>
    </div>
  </div>
</div>
<!-- CARD_TEMPLATE_END -->

<!-- 
TEMPLATE VARIABLES:
- {{characterName}}: Character's name
- {{currentDate}}: Current date in YYYY-MM-DD format
- {{bgColor}}: Primary background color
- {{darkerBgColor}}: Darker variant of background color
- {{contrastColor}}: Contrast color for text against background
- {{stats.ap}}: Affection points
- {{stats.dp}}: Desire points
- {{stats.tp}}: Trust points
- {{stats.cp}}: Contempt points
- {{stats.apChange}}: Change in affection points (positive/negative/zero)
- {{stats.dpChange}}: Change in desire points (positive/negative/zero)
- {{stats.tpChange}}: Change in trust points (positive/negative/zero)
- {{stats.cpChange}}: Change in contempt points (positive/negative/zero)
- {{stats.days_since_first_meeting}}: Days since first meeting
- {{stats.preg}}: Boolean for pregnancy status
- {{stats.days_preg}}: Days pregnant (if applicable)
- {{stats.internal_thought}}: Character's internal thoughts
- {{stats.relationshipStatus}}: Relationship status text
- {{stats.desireStatus}}: Desire status text
- {{stats.inactive}}: Boolean for inactive status
- {{stats.inactiveReason}}: Number indicating reason for inactivity (0-5)
- {{healthIcon}}: Health status icon (ü§ï or üíÄ)
- {{reactionEmoji}}: Reaction emoji (üëç, üëé, or üòê)
- {{showThoughtBubble}}: Boolean to show/hide thought bubble (always shown in this template)
- {{isActive}}: Boolean for card active state (affects opacity)
-->